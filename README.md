# ğŸŒ¦ï¸ HeWeather V7 for Home Assistant

`heweather_v7_key` æ˜¯ä¸€ä¸ªç”¨äºæ¥å…¥ [å’Œé£å¤©æ°” V7 API](https://dev.qweather.com/) çš„ Home Assistant è‡ªå®šä¹‰é›†æˆæ’ä»¶ï¼Œæ”¯æŒå®æ—¶å¤©æ°”ã€ç©ºæ°”è´¨é‡ã€ç”Ÿæ´»æŒ‡æ•°ã€ç¾å®³é¢„è­¦ç­‰å¤šç§æ°”è±¡æœåŠ¡ã€‚

> âœ… æ”¯æŒé€šè¿‡ HACS å®‰è£…ï¼Œä¹Ÿæ”¯æŒæ‰‹åŠ¨å®‰è£…ã€‚  
> ğŸ”‘ ä½¿ç”¨å‰è¯·åœ¨å’Œé£å¤©æ°”å®˜ç½‘ç”³è¯· API Keyï¼ˆå…è´¹å¼€å‘ç‰ˆå³å¯ï¼‰ã€‚

---

## âœ¨ ç‰¹æ€§ä¸€è§ˆ

- âœ… æ”¯æŒä»¥ä¸‹å’Œé£å¤©æ°”æ¥å£ï¼š
  - `/v7/weather/now`ï¼šå®æ—¶å¤©æ°”
  - `/v7/weather/7d`ï¼šå¤©æ°”é¢„æŠ¥
  - `/v7/air/now`ï¼šå®æ—¶ç©ºæ°”è´¨é‡
  - `/v7/warning/now`ï¼šæ°”è±¡ç¾å®³é¢„è­¦
  - `/v7/indices/1d`ï¼šç”Ÿæ´»æŒ‡æ•°ï¼ˆè¿åŠ¨ã€ç´«å¤–çº¿ç­‰ï¼‰

- âœ… æä¾›ä»¥ä¸‹å®ä½“ç±»å‹ï¼š
  - `weather.youweather_åŸå¸‚å`ï¼ˆå¤©æ°”å¡ç‰‡ç»„ä»¶ï¼‰
  - `sensor.youweather_*`ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€ç©ºæ°”è´¨é‡ã€å„ç±»æŒ‡æ•°ã€é¢„è­¦ç­‰ï¼‰
- âœ… ä¸­æ–‡ `friendly_name` + å¤©æ°”å›¾æ ‡æ”¯æŒ
- âœ… å¤šåŸå¸‚æ”¯æŒï¼ˆå¯æ·»åŠ å¤šä¸ªé›†æˆå®ä¾‹ï¼‰

---

## ğŸ§© å®‰è£…æ–¹æ³•

### ğŸ“¦ æ–¹æ³•ä¸€ï¼šé€šè¿‡ HACS å®‰è£…ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ Home Assistant â†’ HACS â†’ é›†æˆ â†’ ä¸‰ç‚¹èœå• â†’ è‡ªå®šä¹‰ä»“åº“ã€‚
2. æ·»åŠ ä»“åº“åœ°å€ï¼š

https://github.com/zhoujunn/heweather_v7_key

bash
å¤åˆ¶
ç¼–è¾‘
ç±»å‹é€‰æ‹©ä¸ºï¼š**Integration**

3. å®‰è£…åé‡å¯ Home Assistantã€‚
4. åœ¨ â€œè®¾å¤‡ä¸æœåŠ¡â€ â†’ â€œæ·»åŠ é›†æˆâ€ ä¸­æœç´¢ `HeWeather` è¿›è¡Œé…ç½®ã€‚

### ğŸ“ æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…

```bash
cd config/custom_components
git clone https://github.com/zhoujunn/heweather_v7_key.git heweather_v7_key
é‡å¯ Home Assistant åæ·»åŠ é›†æˆã€‚

âš™ï¸ é…ç½®å‚æ•°è¯´æ˜
åœ¨æ·»åŠ é›†æˆæ—¶ï¼Œä½ éœ€è¦å¡«å†™ä»¥ä¸‹å‚æ•°ï¼š

å‚æ•°å­—æ®µ	è¯´æ˜
API Key	ä» å’Œé£å¤©æ°”æ§åˆ¶å° è·å–çš„ key
Location	åŸå¸‚ä»£ç ï¼Œä¾‹å¦‚ï¼š101010100 è¡¨ç¤ºåŒ—äº¬å¸‚ï¼ˆå¯å‚è€ƒä¸‹æ–¹åŸå¸‚ä»£ç ç¤ºä¾‹ï¼‰
åŸå¸‚åç§°	ä»»æ„å‘½åï¼Œä»…ç”¨äºå®ä½“å‘½ååç¼€ï¼ˆå¦‚ youweather_beijingï¼‰å»ºè®®ä½¿ç”¨æ‹¼éŸ³æˆ–è‹±æ–‡

ç¤ºä¾‹ï¼š

API Keyï¼š1234567890abcdef

Locationï¼š101190101ï¼ˆå—äº¬ï¼‰

åŸå¸‚åç§°ï¼šnanjing

ğŸ§ª å®ä½“ç¤ºä¾‹
é…ç½®æˆåŠŸåï¼Œä½ å°†è·å¾—å¤šä¸ªå®ä½“ï¼š

ğŸ“ å¤©æ°”ç»„ä»¶
weather.youweather_nanjing

ğŸ“Š ä¼ æ„Ÿå™¨å®ä½“ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼‰
å®ä½“ ID	ç¤ºä¾‹è¯´æ˜
sensor.youweather_temperature	å½“å‰æ°”æ¸©
sensor.youweather_humidity	å½“å‰æ¹¿åº¦
sensor.youweather_air_quality	ç©ºæ°”è´¨é‡ç­‰çº§ä¸æŒ‡æ•°
sensor.youweather_warning_title_1	ç¬¬1ä¸ªæ°”è±¡é¢„è­¦æ ‡é¢˜
sensor.youweather_warning_level_1	ç¬¬1ä¸ªé¢„è­¦ç­‰çº§
sensor.youweather_warning_type_name_1	ç¬¬1ä¸ªé¢„è­¦ç±»å‹
sensor.youweather_sport_index	ä»Šæ—¥è¿åŠ¨ç”Ÿæ´»æŒ‡æ•°å»ºè®®
sensor.youweather_uv_index	ç´«å¤–çº¿æŒ‡æ•°

âš ï¸ è‹¥æœ‰å¤šä¸ªé¢„è­¦ï¼Œå°†è‡ªåŠ¨ç¼–å·ä¸º title_1ã€title_2ã€level_1 ç­‰ã€‚

ğŸ—ºï¸ åŸå¸‚ä»£ç å‚è€ƒï¼ˆéƒ¨åˆ†ï¼‰
ä½ å¯ä»¥ä½¿ç”¨å’Œé£çš„ åŸå¸‚æœç´¢æ¥å£ï¼Œä¹Ÿå¯å‚è€ƒä»¥ä¸‹å¸¸ç”¨ä»£ç ï¼š

åŸå¸‚	åŸå¸‚ä»£ç 
åŒ—äº¬	101010100
ä¸Šæµ·	101020100
å—äº¬	101190101
å¹¿å·	101280101
æ·±åœ³	101280601
æ­å·	101210101

ğŸ§± ç¤ºä¾‹å¡ç‰‡å±•ç¤ºï¼ˆLovelaceï¼‰
ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®æ·»åŠ å¤©æ°”å¡ç‰‡ï¼š

yaml
å¤åˆ¶
ç¼–è¾‘
type: weather-forecast
entity: weather.youweather_nanjing
name: å—äº¬å¤©æ°”
æˆ–ä½¿ç”¨å®ä½“å¡ç‰‡æ˜¾ç¤ºå¤šä¸ªä¼ æ„Ÿå™¨ï¼š

yaml
å¤åˆ¶
ç¼–è¾‘
type: entities
title: å¤©æ°”ç›‘æ§
entities:
  - entity: sensor.youweather_temperature
  - entity: sensor.youweather_humidity
  - entity: sensor.youweather_air_quality
  - entity: sensor.youweather_sport_index
  - entity: sensor.youweather_warning_title_1
ğŸ› ï¸ å¼€å‘è®¡åˆ’
 å¤šåŸå¸‚æ”¯æŒ

 å®ä½“å‹å¥½å‘½åï¼ˆfriendly_nameï¼‰

 å›¾æ ‡é€‚é…

 åŠ¨æ€å›¾æ ‡æ˜ å°„ä¼˜åŒ–

 å¯é…ç½®æ›´æ–°æ—¶é—´é—´éš”

 å¢åŠ  24 å°æ—¶é¢„æŠ¥æ¥å£æ”¯æŒ

ğŸ“„ License
æœ¬é¡¹ç›®éµå¾ª MIT Licenseã€‚

ğŸ™ è‡´è°¢
å’Œé£å¤©æ°” æä¾›çš„é«˜è´¨é‡å¤©æ°”æ•°æ® APIã€‚

æ„Ÿè°¢ Home Assistant ç¤¾åŒºçš„å¯å‘ä¸æ”¯æŒã€‚

ğŸ§Š æ¬¢è¿æäº¤ Issue æˆ– PR ä¸€èµ·å®Œå–„åŠŸèƒ½ï¼å¦‚éœ€æ›´å¤šå®šåˆ¶åŒ–æ”¯æŒï¼Œå¯é€šè¿‡ GitHub è”ç³»ä½œè€…ã€‚
